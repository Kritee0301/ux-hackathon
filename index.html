<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPCYCLED BITES - Smart Meal Planning & Nutrition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        * {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            /* background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); */
            background: linear-gradient(135deg, #be45f1 0%, #7502e8 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        /* Desktop hover effects */
        @media (hover: hover) and (pointer: fine) {
            .card-hover:hover {
                transform: translateY(-4px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
            }
            
            .nav-item:hover {
                background: rgba(255, 255, 255, 0.1);
            }
        }
        
        /* Mobile touch feedback */
        @media (hover: none) and (pointer: coarse) {
            .card-hover:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .nav-item:active {
                background: rgba(255, 255, 255, 0.1);
            }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .bounce-in {
            animation: bounceIn 0.8s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .streak-fire {
            animation: flicker 1.5s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .nav-item {
            transition: all 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }
        
        .progress-ring {
            transition: stroke-dasharray 0.8s ease-in-out;
        }
        
        /* Cross-platform button styles */
        button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border: none;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        input, select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        /* Mobile-specific optimizations */
        @media (max-width: 768px) {
            .mobile-padding {
                padding-bottom: 80px; /* Space for bottom nav */
            }
            
            .mobile-text {
                font-size: 0.875rem;
            }
            
            .mobile-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .mobile-chart {
                height: 200px;
            }
        }
        
        /* Tablet optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            .tablet-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Desktop optimizations */
        @media (min-width: 1025px) {
            .desktop-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* High DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .high-dpi-text {
                font-weight: 400;
            }
        }
        
        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .card-hover, .nav-item, .pulse-glow, .slide-in, .bounce-in, .streak-fire {
                animation: none;
                transition: none;
            }
        }
        
        /* Focus styles for keyboard navigation */
        button:focus-visible, input:focus-visible, select:focus-visible {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }
        
        /* Scrollbar styling for webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* Modal styles */
        .modal-overlay {
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-content {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="gradient-bg sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                        <span class="text-2xl"><img src="WhatsApp_Image_2025-09-28_at_14.26.17_ec851a1d-removebg-preview.png" alt=""></span>
                    </div>
                    <h1 class="text-xl font-bold">UPCYCLED BITES</h1>
                </div>
                <div class="hidden md:flex space-x-2 lg:space-x-6">
                    <button class="nav-item px-2 lg:px-3 py-2 rounded-lg text-xs lg:text-sm font-medium" onclick="showSection('dashboard')">Dashboard</button>
                    <button class="nav-item px-2 lg:px-3 py-2 rounded-lg text-xs lg:text-sm font-medium" onclick="showSection('meal-planner')">Planner</button>
                    <button class="nav-item px-2 lg:px-3 py-2 rounded-lg text-xs lg:text-sm font-medium" onclick="showSection('recipes')">Recipes</button>
                    <button class="nav-item px-2 lg:px-3 py-2 rounded-lg text-xs lg:text-sm font-medium" onclick="showSection('tracking')">Tracking</button>
                    <button class="nav-item px-2 lg:px-3 py-2 rounded-lg text-xs lg:text-sm font-medium" onclick="showSection('community')">Community</button>
                </div>
                <div class="flex items-center space-x-2 md:space-x-4">
                    <div class="streak-fire text-orange-400 text-lg md:text-xl">üî•</div>
                    <span class="text-xs md:text-sm font-bold hidden sm:block">7 Day Streak!</span>
                    <span class="text-xs md:text-sm font-bold sm:hidden">7üî•</span>
                    <button class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <span class="text-sm md:text-lg">üë§</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mobile-padding">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <!-- Hero Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8">
                <div class="card-hover bg-gray-800 border border-purple-500 rounded-xl md:rounded-2xl p-3 md:p-6 text-center">
                    <div class="w-10 h-10 md:w-16 md:h-16 mx-auto bg-green-900 rounded-full flex items-center justify-center mb-2 md:mb-4">
                        <span class="text-xl md:text-3xl">üéØ</span>
                    </div>
                    <h3 class="text-sm md:text-lg font-semibold mb-1 md:mb-2">Daily Goal</h3>
                    <div class="text-lg md:text-2xl font-bold text-green-400">92%</div>
                    <p class="text-xs md:text-sm text-gray-400">1,840 / 2,000 cal</p>
                </div>
                
                <div class="card-hover bg-gray-800 border border-purple-500 rounded-xl md:rounded-2xl p-3 md:p-6 text-center">
                    <div class="w-10 h-10 md:w-16 md:h-16 mx-auto bg-blue-900 rounded-full flex items-center justify-center mb-2 md:mb-4">
                        <span class="text-xl md:text-3xl">üíß</span>
                    </div>
                    <h3 class="text-sm md:text-lg font-semibold mb-1 md:mb-2">Hydration</h3>
                    <div class="text-lg md:text-2xl font-bold text-blue-400">7/8</div>
                    <p class="text-xs md:text-sm text-gray-400">glasses today</p>
                </div>
                
                <div class="card-hover bg-gray-800 border border-purple-500 rounded-xl md:rounded-2xl p-3 md:p-6 text-center">
                    <div class="w-10 h-10 md:w-16 md:h-16 mx-auto bg-purple-900 rounded-full flex items-center justify-center mb-2 md:mb-4">
                        <span class="text-xl md:text-3xl">üèÜ</span>
                    </div>
                    <h3 class="text-sm md:text-lg font-semibold mb-1 md:mb-2">Achievements</h3>
                    <div class="text-lg md:text-2xl font-bold text-purple-400">12</div>
                    <p class="text-xs md:text-sm text-gray-400">badges earned</p>
                </div>
                
                <div class="card-hover bg-gray-800 border border-purple-500 rounded-xl md:rounded-2xl p-3 md:p-6 text-center">
                    <div class="w-10 h-10 md:w-16 md:h-16 mx-auto bg-orange-900 rounded-full flex items-center justify-center mb-2 md:mb-4">
                        <span class="text-xl md:text-3xl">‚ôªÔ∏è</span>
                    </div>
                    <h3 class="text-sm md:text-lg font-semibold mb-1 md:mb-2">Waste Saved</h3>
                    <div class="text-lg md:text-2xl font-bold text-orange-400">2.3kg</div>
                    <p class="text-xs md:text-sm text-gray-400">this month</p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
                <div class="card-hover bg-gray-800 border border-purple-600 rounded-xl md:rounded-2xl p-4 md:p-6">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üçΩÔ∏è Quick Meal Log</h3>
                    <button class="w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-2 md:py-3 px-4 rounded-xl font-medium mb-3 pulse-glow text-sm md:text-base">
                        üì∏ Snap & Log Meal
                    </button>
                    <div class="grid grid-cols-3 gap-2">
                        <button class="bg-gray-700 py-2 px-2 md:px-3 rounded-lg text-xs md:text-sm">ü•ó Salad</button>
                        <button class="bg-gray-700 py-2 px-2 md:px-3 rounded-lg text-xs md:text-sm">üç≥ Eggs</button>
                        <button class="bg-gray-700 py-2 px-2 md:px-3 rounded-lg text-xs md:text-sm">ü•ô Wrap</button>
                    </div>
                </div>
                
                <div class="card-hover bg-gray-800 border border-purple-600 rounded-xl md:rounded-2xl p-4 md:p-6">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üé≤ Recipe Roulette</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-3 md:mb-4">Discover recipes with your available ingredients</p>
                    <button class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 md:py-3 px-4 rounded-xl font-medium text-sm md:text-base" onclick="spinRoulette()">
                        üé∞ Spin for Recipe
                    </button>
                    <div id="roulette-result" class="mt-3 text-center hidden">
                        <div class="bounce-in">
                            <span class="text-xl md:text-2xl">üçù</span>
                            <p class="text-xs md:text-sm text-green-400 mt-1">Spaghetti Carbonara!</p>
                        </div>
                    </div>
                </div>
                
                <div class="card-hover bg-gray-800 border border-purple-600 rounded-xl md:rounded-2xl p-4 md:p-6">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üòä Mood & Food</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-3 md:mb-4">How are you feeling today?</p>
                    <div class="grid grid-cols-5 gap-1 md:gap-2 mb-3">
                        <button class="mood-btn text-lg md:text-2xl p-1 md:p-2 rounded-lg bg-gray-700" data-mood="üò¢">üò¢</button>
                        <button class="mood-btn text-lg md:text-2xl p-1 md:p-2 rounded-lg bg-gray-700" data-mood="üòê">üòê</button>
                        <button class="mood-btn text-lg md:text-2xl p-1 md:p-2 rounded-lg bg-gray-700" data-mood="üôÇ">üôÇ</button>
                        <button class="mood-btn text-lg md:text-2xl p-1 md:p-2 rounded-lg bg-gray-700" data-mood="üòä">üòä</button>
                        <button class="mood-btn text-lg md:text-2xl p-1 md:p-2 rounded-lg bg-gray-700" data-mood="üòÑ">üòÑ</button>
                    </div>
                    <div class="flex justify-center">
                        <div class="relative w-20 h-20 md:w-24 md:h-24">
                            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="#374151" stroke-width="8" fill="none"/>
                                <circle id="moodProgress" cx="50" cy="50" r="40" stroke="#8b5cf6" stroke-width="8" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="125.6" class="progress-ring"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="moodEmoji" class="text-2xl md:text-3xl">üôÇ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Today's Plan -->
            <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6 mb-8">
                <h3 class="text-xl font-bold mb-6">üìÖ Today's Meal Plan</h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-gray-700 rounded-xl p-4">
                        <h4 class="font-semibold mb-2">üåÖ Breakfast</h4>
                        <p class="text-sm text-gray-300">Avocado Toast & Coffee</p>
                        <p class="text-xs text-green-400 mt-1">420 cal ‚Ä¢ High Fiber</p>
                    </div>
                    <div class="bg-gray-700 rounded-xl p-4">
                        <h4 class="font-semibold mb-2">ü•ó Lunch</h4>
                        <p class="text-sm text-gray-300">Quinoa Buddha Bowl</p>
                        <p class="text-xs text-blue-400 mt-1">580 cal ‚Ä¢ Protein Rich</p>
                    </div>
                    <div class="bg-gray-700 rounded-xl p-4">
                        <h4 class="font-semibold mb-2">üçé Snack</h4>
                        <p class="text-sm text-gray-300">Greek Yogurt & Berries</p>
                        <p class="text-xs text-purple-400 mt-1">180 cal ‚Ä¢ Probiotics</p>
                    </div>
                    <div class="bg-gray-700 rounded-xl p-4 border-2 border-dashed border-gray-600">
                        <h4 class="font-semibold mb-2">üçΩÔ∏è Dinner</h4>
                        <p class="text-sm text-gray-400">Plan your dinner</p>
                        <button class="text-xs text-blue-400 mt-1">+ Add meal</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Planner Section -->
        <div id="meal-planner" class="section hidden">
            <h2 class="text-3xl font-bold mb-8">üçΩÔ∏è Smart Meal Planner</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Meal Planning Form -->
                <div class="lg:col-span-2">
                    <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6 mb-6">
                        <h3 class="text-xl font-bold mb-4">Create Your Meal Plan</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Dietary Preferences</label>
                                <select class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2">
                                    <option>Balanced Diet</option>
                                    <option>Vegetarian</option>
                                    <option>Vegan</option>
                                    <option>Keto</option>
                                    <option>Mediterranean</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Calorie Goal</label>
                                <input type="number" value="2000" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Available Ingredients</label>
                            <div class="flex flex-wrap gap-2 mb-2" id="ingredients-list">
                                <span class="bg-green-900 text-green-300 px-3 py-1 rounded-full text-sm">ü•ï Carrots</span>
                                <span class="bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-sm">üêü Salmon</span>
                                <span class="bg-yellow-900 text-yellow-300 px-3 py-1 rounded-full text-sm">üßÑ Garlic</span>
                            </div>
                            <input type="text" placeholder="Add ingredient..." class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2" id="ingredient-input">
                        </div>
                        
                        <button class="w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-xl font-medium">
                            üéØ Generate Smart Meal Plan
                        </button>
                    </div>
                    
                    <!-- Waste Reduction Tips -->
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-xl font-bold mb-4">‚ôªÔ∏è Reduce Food Waste</h3>
                        <div class="space-y-4">
                            <div class="bg-orange-900 bg-opacity-30 border border-orange-700 rounded-lg p-4">
                                <h4 class="font-semibold text-orange-300 mb-2">ü•¨ Expiring Soon</h4>
                                <p class="text-sm text-gray-300">Lettuce expires in 2 days. Try: Caesar Salad, Lettuce Wraps</p>
                                <button class="text-orange-400 text-sm mt-2">View recipes ‚Üí</button>
                            </div>
                            <div class="bg-green-900 bg-opacity-30 border border-green-700 rounded-lg p-4">
                                <h4 class="font-semibold text-green-300 mb-2">üîÑ Smart Swaps</h4>
                                <p class="text-sm text-gray-300">Out of spinach? Use kale or arugula instead!</p>
                                <button class="text-green-400 text-sm mt-2">See all swaps ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Weekly Calendar -->
                <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-4">üìÖ This Week</h3>
                    <div class="space-y-3">
                        <div class="bg-gray-700 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Monday</span>
                                <span class="text-green-400 text-sm">‚úì Complete</span>
                            </div>
                            <div class="text-sm text-gray-400">
                                <div>üåÖ Oatmeal Bowl</div>
                                <div>ü•ó Greek Salad</div>
                                <div>üçó Grilled Chicken</div>
                            </div>
                        </div>
                        <div class="bg-gray-700 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Tuesday</span>
                                <span class="text-blue-400 text-sm">üìù Planned</span>
                            </div>
                            <div class="text-sm text-gray-400">
                                <div>ü•û Pancakes</div>
                                <div>üçú Ramen Bowl</div>
                                <div>üêü Baked Salmon</div>
                            </div>
                        </div>
                        <div class="bg-gray-700 rounded-lg p-3 border-2 border-dashed border-gray-600">
                            <div class="text-center text-gray-400">
                                <span class="text-2xl block mb-2">‚ûï</span>
                                <span class="text-sm">Plan Wednesday</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recipe Discovery Section -->
        <div id="recipes" class="section hidden">
            <h2 class="text-3xl font-bold mb-8">üîç Recipe Discovery</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8">
                <!-- Search & Filters -->
                <div class="lg:col-span-3">
                    <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6 mb-6">
                        <div class="flex flex-col md:flex-row gap-4 mb-4">
                            <input type="text" placeholder="Search recipes..." class="flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3">
                            <button class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-medium">
                                üîç Search
                            </button>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button class="bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded-full text-sm">ü•ó Healthy</button>
                            <button class="bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded-full text-sm">‚ö° Quick (< 30min)</button>
                            <button class="bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded-full text-sm">üë∂ Kid-Friendly</button>
                            <button class="bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded-full text-sm">üéâ Party Size</button>
                            <button class="bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded-full text-sm">üå± Vegetarian</button>
                        </div>
                    </div>
                    
                    <!-- Recipe Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="card-hover bg-gray-800 border border-purple-500 rounded-2xl overflow-hidden">
                            <div class="h-48 bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center">
                                <span class="text-6xl">üçù</span>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold mb-2">Creamy Pasta Carbonara</h3>
                                <p class="text-sm text-gray-400 mb-3">Classic Italian comfort food</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-green-400 text-sm">‚è±Ô∏è 25 min</span>
                                    <span class="text-yellow-400 text-sm">‚≠ê 4.8</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-hover bg-gray-800 border border-purple-500 rounded-2xl overflow-hidden">
                            <div class="h-48 bg-gradient-to-br from-green-500 to-blue-500 flex items-center justify-center">
                                <span class="text-6xl">ü•ó</span>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold mb-2">Rainbow Buddha Bowl</h3>
                                <p class="text-sm text-gray-400 mb-3">Nutritious and colorful</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-green-400 text-sm">‚è±Ô∏è 15 min</span>
                                    <span class="text-yellow-400 text-sm">‚≠ê 4.9</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-hover bg-gray-800 border border-purple-500 rounded-2xl overflow-hidden">
                            <div class="h-48 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                                <span class="text-6xl">üç∞</span>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold mb-2">Chocolate Avocado Mousse</h3>
                                <p class="text-sm text-gray-400 mb-3">Healthy dessert option</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-green-400 text-sm">‚è±Ô∏è 10 min</span>
                                    <span class="text-yellow-400 text-sm">‚≠ê 4.7</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recipe Tools -->
                <div class="space-y-6">
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üé≤ Recipe Roulette</h3>
                        <p class="text-sm text-gray-400 mb-4">Feeling adventurous? Let us surprise you!</p>
                        <button class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-4 rounded-xl font-medium mb-3" onclick="spinRoulette()">
                            üé∞ Surprise Me!
                        </button>
                        <div class="text-xs text-gray-500">Based on your preferences & ingredients</div>
                    </div>
                    
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üë∂ Kids Mode</h3>
                        <p class="text-sm text-gray-400 mb-4">Fun, healthy recipes kids will love!</p>
                        <button class="w-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white py-3 px-4 rounded-xl font-medium">
                            üé® Kid Recipes
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üéâ Large Gatherings</h3>
                        <p class="text-sm text-gray-400 mb-4">Hosting a party? Scale up recipes!</p>
                        <input type="number" placeholder="Number of guests" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 mb-3">
                        <button class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-xl font-medium">
                            üìä Scale Recipes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tracking Section -->
        <div id="tracking" class="section hidden">
            <h2 class="text-3xl font-bold mb-8">üìä Health Tracking</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Weight & Progress -->
                <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-6">‚öñÔ∏è Weight Progress</h3>
                    <div class="mb-6">
                        <canvas id="weightChart" width="400" height="200"></canvas>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-blue-400">72.5kg</div>
                            <div class="text-sm text-gray-400">Current</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-400">-2.3kg</div>
                            <div class="text-sm text-gray-400">This Month</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-purple-400">70kg</div>
                            <div class="text-sm text-gray-400">Goal</div>
                        </div>
                    </div>
                </div>
                
                <!-- Nutrition Breakdown -->
                <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-6">ü•Ñ Nutrition Today</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm">Calories</span>
                                <span class="text-sm font-medium">1,847 / 2,000</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3">
                                <div class="bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full" style="width: 92%"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm">Protein</span>
                                <span class="text-sm font-medium">85g / 120g</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3">
                                <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full" style="width: 71%"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm">Carbs</span>
                                <span class="text-sm font-medium">180g / 250g</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3">
                                <div class="bg-gradient-to-r from-yellow-500 to-orange-500 h-3 rounded-full" style="width: 72%"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm">Fats</span>
                                <span class="text-sm font-medium">45g / 65g</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-3">
                                <div class="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full" style="width: 69%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-green-900 bg-opacity-30 border border-green-700 rounded-lg">
                        <h4 class="font-semibold text-green-300 mb-2">üí° Smart Tip</h4>
                        <p class="text-sm text-gray-300">Great protein intake! Add some healthy fats like nuts or avocado for better nutrient absorption.</p>
                    </div>
                </div>
                
                <!-- Mood & Food Correlation -->
                <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold">üòä Mood & Food Insights</h3>
                        <button onclick="expandMoodChart()" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="h-48">
                        <canvas id="moodFoodChart" width="400" height="200"></canvas>
                    </div>
                    <div class="mt-4 text-sm text-gray-400">
                        <p>Your mood tends to improve after balanced meals with protein and complex carbs!</p>
                    </div>
                </div>
                
                <!-- Achievements -->
                <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-6">üèÜ Achievements</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-4 bg-yellow-900 bg-opacity-30 rounded-lg">
                            <div class="text-3xl mb-2">üî•</div>
                            <div class="font-semibold text-yellow-300">7 Day Streak</div>
                            <div class="text-xs text-gray-400">Consistent logging</div>
                        </div>
                        <div class="text-center p-4 bg-green-900 bg-opacity-30 rounded-lg">
                            <div class="text-3xl mb-2">ü•ó</div>
                            <div class="font-semibold text-green-300">Veggie Master</div>
                            <div class="text-xs text-gray-400">5 servings daily</div>
                        </div>
                        <div class="text-center p-4 bg-blue-900 bg-opacity-30 rounded-lg">
                            <div class="text-3xl mb-2">üíß</div>
                            <div class="font-semibold text-blue-300">Hydration Hero</div>
                            <div class="text-xs text-gray-400">8 glasses daily</div>
                        </div>
                        <div class="text-center p-4 bg-purple-900 bg-opacity-30 rounded-lg">
                            <div class="text-3xl mb-2">‚ôªÔ∏è</div>
                            <div class="font-semibold text-purple-300">Waste Warrior</div>
                            <div class="text-xs text-gray-400">Zero waste week</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Community Section -->
        <div id="community" class="section hidden">
            <h2 class="text-3xl font-bold mb-8">üë• Community & Sharing</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-6">
                    <!-- Food Donation -->
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-xl font-bold mb-4">ü§ù Food Donation Network</h3>
                        <p class="text-gray-400 mb-4">Have excess food from your gathering? Connect with local charities and NGOs!</p>
                        
                        <div class="bg-orange-900 bg-opacity-30 border border-orange-700 rounded-lg p-4 mb-4">
                            <h4 class="font-semibold text-orange-300 mb-2">üìç Nearby Organizations</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-medium">City Food Bank</div>
                                        <div class="text-sm text-gray-400">0.8 km away ‚Ä¢ Accepts cooked meals</div>
                                    </div>
                                    <button class="bg-orange-600 text-white px-3 py-1 rounded-lg text-sm">Contact</button>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-medium">Hope Kitchen</div>
                                        <div class="text-sm text-gray-400">1.2 km away ‚Ä¢ Needs fresh produce</div>
                                    </div>
                                    <button class="bg-orange-600 text-white px-3 py-1 rounded-lg text-sm">Contact</button>
                                </div>
                            </div>
                        </div>
                        
                        <button class="w-full bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 px-4 rounded-xl font-medium">
                            üì± Report Excess Food
                        </button>
                    </div>
                    
                    <!-- Community Feed -->
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-xl font-bold mb-4">üì± Community Feed</h3>
                        <div class="space-y-4">
                            <div class="bg-gray-700 rounded-lg p-4">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold">S</span>
                                    </div>
                                    <div>
                                        <div class="font-semibold">Sarah M.</div>
                                        <div class="text-sm text-gray-400">2 hours ago</div>
                                    </div>
                                </div>
                                <p class="text-gray-300 mb-3">Just made the most amazing quinoa bowl! ü•ó Used up all my leftover veggies and it was delicious!</p>
                                <div class="flex space-x-4 text-sm text-gray-400">
                                    <button class="hover:text-red-400">‚ù§Ô∏è 24</button>
                                    <button class="hover:text-blue-400">üí¨ 5</button>
                                    <button class="hover:text-green-400">üîÑ Share</button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-700 rounded-lg p-4">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold">M</span>
                                    </div>
                                    <div>
                                        <div class="font-semibold">Mike R.</div>
                                        <div class="text-sm text-gray-400">4 hours ago</div>
                                    </div>
                                </div>
                                <p class="text-gray-300 mb-3">Hit my 30-day streak today! üî• The meal planning feature has been a game-changer for my health goals.</p>
                                <div class="flex space-x-4 text-sm text-gray-400">
                                    <button class="hover:text-red-400">‚ù§Ô∏è 18</button>
                                    <button class="hover:text-blue-400">üí¨ 3</button>
                                    <button class="hover:text-green-400">üîÑ Share</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar -->
                <div class="space-y-6">
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üéØ Weekly Challenges</h3>
                        <div class="space-y-3">
                            <div class="bg-green-900 bg-opacity-30 border border-green-700 rounded-lg p-3">
                                <div class="font-semibold text-green-300">Zero Waste Week</div>
                                <div class="text-sm text-gray-400">Use all ingredients, waste nothing!</div>
                                <div class="text-xs text-green-400 mt-1">Progress: 5/7 days</div>
                            </div>
                            <div class="bg-blue-900 bg-opacity-30 border border-blue-700 rounded-lg p-3">
                                <div class="font-semibold text-blue-300">Protein Power</div>
                                <div class="text-sm text-gray-400">Hit protein goals daily</div>
                                <div class="text-xs text-blue-400 mt-1">Progress: 4/7 days</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üèÖ Leaderboard</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-yellow-400">ü•á</span>
                                    <span class="font-medium">Alex K.</span>
                                </div>
                                <span class="text-sm text-gray-400">2,450 pts</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-gray-400">ü•à</span>
                                    <span class="font-medium">You</span>
                                </div>
                                <span class="text-sm text-gray-400">2,380 pts</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-orange-400">ü•â</span>
                                    <span class="font-medium">Emma L.</span>
                                </div>
                                <span class="text-sm text-gray-400">2,290 pts</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 border border-purple-700 rounded-2xl p-6">
                        <h3 class="text-lg font-bold mb-4">üìö Recipe Collections</h3>
                        <div class="space-y-2">
                            <button class="w-full text-left bg-gray-700 hover:bg-gray-600 rounded-lg p-3">
                                <div class="font-medium">ü•ó Healthy Bowls</div>
                                <div class="text-sm text-gray-400">24 recipes</div>
                            </button>
                            <button class="w-full text-left bg-gray-700 hover:bg-gray-600 rounded-lg p-3">
                                <div class="font-medium">‚ö° Quick Meals</div>
                                <div class="text-sm text-gray-400">18 recipes</div>
                            </button>
                            <button class="w-full text-left bg-gray-700 hover:bg-gray-600 rounded-lg p-3">
                                <div class="font-medium">üéâ Party Food</div>
                                <div class="text-sm text-gray-400">12 recipes</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 md:hidden">
        <div class="flex justify-around py-2">
            <button class="flex flex-col items-center py-2 px-4 text-purple-400" onclick="showSection('dashboard')">
                <span class="text-xl mb-1">üè†</span>
                <span class="text-xs">Home</span>
            </button>
            <button class="flex flex-col items-center py-2 px-4 text-gray-500" onclick="showSection('meal-planner')">
                <span class="text-xl mb-1">üçΩÔ∏è</span>
                <span class="text-xs">Plan</span>
            </button>
            <button class="flex flex-col items-center py-2 px-4 text-gray-500" onclick="showSection('recipes')">
                <span class="text-xl mb-1">üîç</span>
                <span class="text-xs">Recipes</span>
            </button>
            <button class="flex flex-col items-center py-2 px-4 text-gray-500" onclick="showSection('tracking')">
                <span class="text-xl mb-1">üìä</span>
                <span class="text-xs">Track</span>
            </button>
            <button class="flex flex-col items-center py-2 px-4 text-gray-500" onclick="showSection('community')">
                <span class="text-xl mb-1">üë•</span>
                <span class="text-xs">Social</span>
            </button>
        </div>
    </nav>

    <!-- Expanded Mood Chart Modal -->
    <div id="moodChartModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-gray-800 border border-purple-600 rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">üòä Detailed Mood & Food Analysis</h2>
                <button onclick="closeMoodChart()" class="text-gray-400 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Large Chart -->
                <div class="lg:col-span-2">
                    <div class="h-96">
                        <canvas id="expandedMoodChart"></canvas>
                    </div>
                </div>
                
                <!-- Insights -->
                <div class="bg-gray-700 rounded-xl p-4">
                    <h3 class="text-lg font-bold mb-3">üìä Key Insights</h3>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span class="text-sm">Higher protein intake correlates with better mood</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span class="text-sm">Balanced meals lead to more stable energy</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                            <span class="text-sm">Hydration affects mood significantly</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div class="bg-gray-700 rounded-xl p-4">
                    <h3 class="text-lg font-bold mb-3">üí° Recommendations</h3>
                    <div class="space-y-3">
                        <div class="bg-green-900 bg-opacity-30 border border-green-700 rounded-lg p-3">
                            <h4 class="font-semibold text-green-300 text-sm">Best Mood Foods</h4>
                            <p class="text-xs text-gray-300 mt-1">Salmon, quinoa, dark chocolate, berries</p>
                        </div>
                        <div class="bg-blue-900 bg-opacity-30 border border-blue-700 rounded-lg p-3">
                            <h4 class="font-semibold text-blue-300 text-sm">Timing Matters</h4>
                            <p class="text-xs text-gray-300 mt-1">Your mood peaks 2-3 hours after balanced meals</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Weekly Mood Trend -->
            <div class="bg-gray-700 rounded-xl p-4">
                <h3 class="text-lg font-bold mb-3">üìà Weekly Mood Trend</h3>
                <div class="h-48">
                    <canvas id="weeklyMoodChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Section Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update navigation states - reset all to normal state
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('text-purple-400', 'py-3', 'font-bold', 'bg-white', 'bg-opacity-20');
                btn.classList.add('text-white', 'py-2', 'font-medium');
            });
            
            // Highlight active nav item with bigger size and purple color
            event.target.classList.remove('text-white', 'py-2', 'font-medium');
            event.target.classList.add('text-purple-400', 'py-3', 'font-bold', 'bg-white', 'bg-opacity-20');
            
            // Update mobile nav states
            document.querySelectorAll('.fixed.bottom-0 button').forEach(btn => {
                btn.classList.remove('text-purple-400');
                btn.classList.add('text-gray-500');
            });
            
            // Find and highlight corresponding mobile nav item
            const mobileNavButtons = document.querySelectorAll('.fixed.bottom-0 button');
            mobileNavButtons.forEach(btn => {
                if (btn.getAttribute('onclick') && btn.getAttribute('onclick').includes(sectionId)) {
                    btn.classList.remove('text-gray-500');
                    btn.classList.add('text-purple-400');
                }
            });
        }

        // Recipe Roulette
        function spinRoulette() {
            const recipes = [
                { name: 'Spaghetti Carbonara', emoji: 'üçù' },
                { name: 'Buddha Bowl', emoji: 'ü•ó' },
                { name: 'Chicken Tikka', emoji: 'üçó' },
                { name: 'Veggie Stir Fry', emoji: 'ü•ò' },
                { name: 'Salmon Teriyaki', emoji: 'üêü' },
                { name: 'Quinoa Salad', emoji: 'ü•ô' }
            ];
            
            const randomRecipe = recipes[Math.floor(Math.random() * recipes.length)];
            const resultDiv = document.getElementById('roulette-result');
            
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <div class="bounce-in">
                        <span class="text-2xl">${randomRecipe.emoji}</span>
                        <p class="text-sm text-green-400 mt-1">${randomRecipe.name}!</p>
                    </div>
                `;
                resultDiv.classList.remove('hidden');
            }
        }

        // Global variables to prevent multiple chart initializations
        let chartsInitialized = false;
        let moodChart = null;
        let weightChart = null;
        let moodFoodChart = null;
        let expandedMoodChart = null;
        let weeklyMoodChart = null;

        // Mood Tracking
        function initMoodTracking() {
            if (document.querySelector('.mood-btn[data-listener]')) return; // Already initialized
            
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.setAttribute('data-listener', 'true');
                btn.addEventListener('click', function() {
                    // Reset all buttons
                    document.querySelectorAll('.mood-btn').forEach(b => {
                        b.classList.remove('bg-purple-600');
                        b.classList.add('bg-gray-700');
                    });
                    
                    // Highlight selected
                    this.classList.remove('bg-gray-700');
                    this.classList.add('bg-purple-600');
                    
                    // Update circular mood chart
                    updateMoodCircle(this.getAttribute('data-mood'));
                });
            });
        }

        // Ingredient Input
        function initIngredientInput() {
            const ingredientInput = document.getElementById('ingredient-input');
            if (ingredientInput && !ingredientInput.hasAttribute('data-listener')) {
                ingredientInput.setAttribute('data-listener', 'true');
                ingredientInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && this.value.trim()) {
                        const ingredientsList = document.getElementById('ingredients-list');
                        const newIngredient = document.createElement('span');
                        newIngredient.className = 'bg-purple-900 text-purple-300 px-3 py-1 rounded-full text-sm';
                        newIngredient.textContent = `ü•Ñ ${this.value.trim()}`;
                        ingredientsList.appendChild(newIngredient);
                        this.value = '';
                    }
                });
            }
        }

        // Initialize Charts
        function initCharts() {
            if (chartsInitialized) return;
            chartsInitialized = true;

            // Initialize mood circle with default value
            updateMoodCircle('üôÇ', 3);

            // Weight Chart
            const weightCtx = document.getElementById('weightChart');
            if (weightCtx && !weightChart) {
                weightChart = new Chart(weightCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Weight (kg)',
                            data: [75, 74.2, 73.8, 73.1, 72.8, 72.5],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { 
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            y: { 
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' }
                            },
                            x: { 
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' }
                            }
                        }
                    }
                });
            }

            // Mood-Food Correlation Chart
            const moodFoodCtx = document.getElementById('moodFoodChart');
            if (moodFoodCtx && !moodFoodChart) {
                moodFoodChart = new Chart(moodFoodCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Mood vs Nutrition Score',
                            data: [
                                {x: 85, y: 4}, {x: 92, y: 5}, {x: 78, y: 3},
                                {x: 88, y: 4}, {x: 95, y: 5}, {x: 82, y: 4}
                            ],
                            backgroundColor: '#10b981',
                            borderColor: '#059669'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { 
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            y: { 
                                title: { display: true, text: 'Mood (1-5)', color: '#ffffff' },
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' }
                            },
                            x: { 
                                title: { display: true, text: 'Nutrition Score', color: '#ffffff' },
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' }
                            }
                        }
                    }
                });
            }
        }

        function updateMoodCircle(selectedMood, moodValue = null) {
            const moodValues = {'üò¢': 1, 'üòê': 2, 'üôÇ': 3, 'üòä': 4, 'üòÑ': 5};
            const value = moodValue || moodValues[selectedMood] || 3;
            
            // Update emoji in center
            const moodEmoji = document.getElementById('moodEmoji');
            if (moodEmoji) {
                moodEmoji.textContent = selectedMood;
            }
            
            // Update circular progress (0-5 scale to 0-100%)
            const progressCircle = document.getElementById('moodProgress');
            if (progressCircle) {
                const percentage = (value / 5) * 100;
                const circumference = 2 * Math.PI * 40; // radius = 40
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
                
                // Change color based on mood
                const colors = {
                    1: '#ef4444', // red for sad
                    2: '#f97316', // orange for neutral-sad
                    3: '#eab308', // yellow for neutral
                    4: '#22c55e', // green for happy
                    5: '#8b5cf6'  // purple for very happy
                };
                progressCircle.style.stroke = colors[value] || '#8b5cf6';
            }
        }

        // Modal Functions
        function expandMoodChart() {
            const modal = document.getElementById('moodChartModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Initialize expanded charts if not already done
            setTimeout(() => {
                initExpandedCharts();
            }, 100);
        }

        function closeMoodChart() {
            const modal = document.getElementById('moodChartModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function initExpandedCharts() {
            // Expanded Mood-Food Chart
            const expandedCtx = document.getElementById('expandedMoodChart');
            if (expandedCtx && !expandedMoodChart) {
                expandedMoodChart = new Chart(expandedCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Mood vs Nutrition Score',
                            data: [
                                {x: 85, y: 4}, {x: 92, y: 5}, {x: 78, y: 3},
                                {x: 88, y: 4}, {x: 95, y: 5}, {x: 82, y: 4},
                                {x: 90, y: 4}, {x: 87, y: 4}, {x: 93, y: 5},
                                {x: 79, y: 3}, {x: 91, y: 5}, {x: 86, y: 4}
                            ],
                            backgroundColor: '#10b981',
                            borderColor: '#059669',
                            pointRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { 
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            y: { 
                                title: { display: true, text: 'Mood (1-5)', color: '#ffffff' },
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' },
                                min: 1,
                                max: 5
                            },
                            x: { 
                                title: { display: true, text: 'Nutrition Score', color: '#ffffff' },
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' },
                                min: 70,
                                max: 100
                            }
                        }
                    }
                });
            }

            // Weekly Mood Trend Chart
            const weeklyCtx = document.getElementById('weeklyMoodChart');
            if (weeklyCtx && !weeklyMoodChart) {
                weeklyMoodChart = new Chart(weeklyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Daily Mood Average',
                            data: [3.5, 4.2, 3.8, 4.5, 4.1, 4.8, 4.3],
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { 
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            y: { 
                                title: { display: true, text: 'Mood (1-5)', color: '#ffffff' },
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' },
                                min: 1,
                                max: 5
                            },
                            x: { 
                                ticks: { color: '#9ca3af' },
                                grid: { color: '#374151' }
                            }
                        }
                    }
                });
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('moodChartModal');
            if (e.target === modal) {
                closeMoodChart();
            }
        });

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            initMoodTracking();
            initIngredientInput();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9861cd89477125a4',t:'MTc1OTA0NzQzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
